<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-time Collaborative Chat</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar —Å –∫–æ–º–Ω–∞—Ç–∞–º–∏ -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>üí¨ ChatApp</h1>
                <div class="user-info">
                    <div class="status-indicator online" id="userStatus"></div>
                    <span id="username">Loading...</span>
                </div>
            </div>

            <div class="rooms-section">
                <div class="section-header">
                    <h2>–ö–∞–Ω–∞–ª—ã</h2>
                    <button class="btn-icon" id="createRoomBtn" title="–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª">+</button>
                </div>
                <ul class="rooms-list" id="roomsList"></ul>
            </div>

            <div class="online-users-section">
                <div class="section-header">
                    <h2>–û–Ω–ª–∞–π–Ω (<span id="onlineCount">0</span>)</h2>
                </div>
                <ul class="users-list" id="onlineUsersList"></ul>
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–º–Ω–∞—Ç—ã -->
            <header class="chat-header">
                <div class="chat-header-left">
                    <h2 id="currentRoomName">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª</h2>
                    <div class="typing-indicator" id="typingIndicator" style="display: none;"></div>
                </div>
                <div class="chat-header-right">
                    <div class="room-users" id="roomUsers"></div>
                </div>
            </header>

            <!-- –û–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
            <div class="chat-area">
                <div class="chat-messages" id="chatMessages"></div>
                
                <!-- –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ -->
                <div class="collaborative-editor" id="collaborativeEditor" style="display: none;">
                    <div class="editor-header">
                        <h3>–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                        <button class="btn-close" id="closeEditorBtn">√ó</button>
                    </div>
                    <div class="editor-container">
                        <div class="cursors-layer" id="cursorsLayer"></div>
                        <textarea 
                            id="sharedDocument" 
                            placeholder="–ù–∞—á–Ω–∏—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å... –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!"
                            class="shared-textarea"
                        ></textarea>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
            <div class="chat-input-area">
                <div class="input-toolbar">
                    <button class="btn-toolbar" id="toggleEditorBtn" title="–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ">
                        üìù
                    </button>
                    <button class="btn-toolbar" id="uploadFileBtn" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª">
                        üìé
                    </button>
                    <input type="file" id="fileInput" style="display: none;" multiple>
                </div>
                <div class="input-wrapper">
                    <textarea 
                        id="messageInput" 
                        placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                        rows="1"
                    ></textarea>
                    <button id="sendButton" class="send-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã -->
    <div class="modal" id="createRoomModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª</h3>
                <button class="btn-close" id="closeModalBtn">√ó</button>
            </div>
            <div class="modal-body">
                <input 
                    type="text" 
                    id="newRoomName" 
                    placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞"
                    class="modal-input"
                >
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelRoomBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" id="createRoomConfirmBtn">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>
</html>

